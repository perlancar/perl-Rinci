package Rinci::result; # just to make PodWeaver happy

# VERSION

1;
# ABSTRACT: Function/method result metadata

=head1 SPECIFICATION VERSION

 1.1


=head1 INTRODUCTION

This document describes metadata for function/method result. This specification
is part of L<Rinci>. Please do a read up on it first, if you have not already
done so.


=head1 SPECIFICATION

There are currently several properties being used:


=head2 Property: undo_data => ANY

(DEPRECATED) Explained in C<undo> feature section in L<Rinci::function>.


=head2 Properties: cmdline.*

Interpreted by L<Perinci::CmdLine>. See its documentation for more detail.


=head2 Property: prev => ARRAY

Previous result in the "result stack" (analogous to stack trace). The result
MUST be enveloped.

When reporting error that results from a call to another function, the original
result can be set here, to preserve information. See L<Perinci::Sub::Util>'s
C<wrapres()> for a convenience function for this, and L<Perinci::CmdLine>'s way
of displaying it.

Example:

 sub f1 {
     ...
     if (error) { return [500, "Can't f1: blah"] }
     ...
 }

 sub f2 {
     ...
     my $res = f1(...);
     if ($res is error) { return [500, "Can't f2", undef, {prev=>$res}] }
     ...
 }

 sub f3 {
     ...
     my $res = f1(...);
     if ($res is error) { return [500, "Can't f3", undef, {prev=>$res}] }
 }


=head1 FAQ


=head1 SEE ALSO

L<Rinci>

=cut
